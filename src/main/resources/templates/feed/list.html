<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
<link rel="stylesheet" href="/css/feed/feedStyle.css">
<link rel="stylesheet" href="/css/feed/list.css">
<link rel="stylesheet" href="/css/feed/followModal.css">
<script defer src="index.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link
   href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
   rel="stylesheet"
   integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
   crossorigin="anonymous"
/>
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

<style>
.feed-list {
	margin-top: 100px;
}

.feed-list-wrap {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4개의 열 생성 */
    gap: 5px; /* 칸 사이의 간격 */
}

.feed-list-wrap img {
    width: 270px;
    height: 270px;
    display: block;
}
</style>

<title>Insert title here</title>
</head>
<body>
	<th:block th:include="common/header"></th:block>


<!-- 
페이지에서 받아야 하는 정보 
페이지 주인의 넘버, 유저의 아이디, 유저의 닉네임, 유저의 자기소개, 팔로워, 팔로잉, 게시물 갯수
페이지 넘겨줄때 페이지 주인의 아이디 / 1페이지 
 -->

	<main class="content">
		<section class="section feed-list">

			<div class="user-profile">
				<ul>

					<li class="user-profile-photo">
						<div>
							<img src="/image/feed/profilePhoto.jfif" class="profile-image">
						</div>
					</li>
					<li>
						<div class="user-introduce">
							<ul>
								<li><span class="user-introduce-id" th:text="${user.userId}"></span></li> 
						
								<li><span class="user-introduce-nick" th:text="${user.userNick}"></span></li>
								<li><span class="user-introduce-content" th:text=${user.userInfo}></span></li>
							<!-- 
								<li><span th:text="${user.userId}" class="user-introduce-id"></span></li>
								<li><span th:text="${user.userNick}" class="user-introduce-nick"></span></li>
								<li><span th:text="${user.userInfo}" class="user-introduce-content"></span></li>
							 -->
							</ul>
						</div>
					</li>

					<li class="user-content">
						<div>
							<ul>
								<li>
									<div class="user-content-no">
										<ul>
											<li>
												<ul class="content-no">
													<li><span class="content-total-no">0</span></li>
													<li>게시물</li>
												</ul>
											</li>
											<li>
												<ul class="content-no">
													<a href="#" id="openFollowModal"><li><span
															class="follow-total-no">0</span></li>
														<li>팔로워</li></a>
												</ul>
											</li>
											<li>
												<ul class="content-no">
													<a href="#" id="openFollowingModal"><li><span
															class="following-total-no">0</span></li>
														<li>팔로잉</li></a>
													<!--내가 친구-->
												</ul>
											</li>
										</ul>
									</div> <!-- 팔로워 모달 -->
									<div id="followModal" class="modal">
										<div class="modal-content">   <!-- 비동기로 띄우는걸로 해보자  -->
											<span class="close" id="closeFollowModal">&times;</span>
											<div class="modal-header">팔로워 목록</div>
											<div class="modal-body" id="followList">
												<!-- 팔로워 리스트 항목들 -->
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
												</p>
											</div>
										</div>
									</div> <!-- 팔로잉 모달 -->
									<div id="followingModal" class="modal">
										<div class="modal-content">
											<span class="close" id="closeFollowingModal">&times;</span>
											<div class="modal-header">팔로잉 목록</div>
											<div class="modal-body" id="followingList">
												<!-- 팔로잉 리스트 항목들 -->
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
												<p>
													<img src="/image/feed/profilePhoto.jfif" alt=""> <span
														class="user-id">유저아이디</span>
													<button class="modal-del">삭제</button>
												</p>
											</div>
										</div>
									</div>
								</li>

								<li class="user-content-repository">
									<div>							 	<!-- th:if="${session.user != null && session.user.userNo == u.userNo}" -->
										
										<a href="/feed/writeForm"><button th:if="${session.user != null}" class="button-style" id="write-feed">피드작성</button></a>
										<a href="/feed/userStorage"><button th:if="${session.user != null}" class="button-style" id="storage">보관함</button></a>
										<button th:if="${session.user == null}" class="button-style" id="follow-btn" >팔로우</button>
										<!-- 팔로우를 누르면 팔로우 취소 버튼으로 ,  -->
									</div>
								</li>
							</ul>
						</div>

					</li>

				</ul>
			</div>
			
			<div class="feed-list-wrap">


			 <th:block th:each="item : ${list}">
       			 <ul>
          			  <li>
           			     <a th:href="@{/feed/view?(userFeedNo=${item.userFeedNo})}">
                 		   <img th:src="${item.userFeedFilepath}" alt="photo"/>
           			     </a>
        			   </li>
     			 </ul>
			</th:block>
			</div>
			
			<div class="list-navi" th:utext="${pageNavi}"></div>
			
			
<div class="bottom-navBar">
      <ul class="nav">
        <li class="nav-item">
          <a class="item" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
        <!-- session에 있는 유저 아이디 가져오기 ? 만약에 아이디가 null 이면 로그인해주세요. 로그인 시 서비스 이용가능합니다. msg 사용 -->
          <a class="item" href="/feed/myPage">MY</a>  
        </li>
        <li class="nav-item">
          <a class="item" href="#">자유</a>
        </li>
        <li class="nav-item">
          <a class="item" href="#">M</a>
        </li>
      </ul>
    </div>


		</section>
	
	</main>
	<script src="/js/feed/followModal.js"></script>

	<script>
	$('write-feed').on('click', function() {
		window.location.href = '/feed/writeForm'
	})
	
	$(document).ready(function() {
    $('#follow-btn').on('click', function() {
        var $this = $(this);

        // 현재 버튼의 텍스트를 확인하고 상태를 변경합니다.
        if ($this.text().trim() === '팔로우') {
            // '팔로우' 상태일 때
            $this.text('팔로우 취소');
            window.location.href = '/feed/userFollowCancle'+session.user;
        } else {
     	       // '팔로우 취소' 상태일 때
            $this.text('팔로우');
            window.location.href = '/feed/userFollow'+session.user;
      	  }
  	 	 });
	});
</script>
	  <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
	<th:block th:include="common/footer"></th:block>
</body>
</html>